#! /bin/bash
# Prints megaraid status

# If sas is used, change this to true
SAS=false

if ! $(hash megaraid-status &> /dev/null); then
    echo "megaraid-status or megaraidsas-status not installed"
    exit 1
fi

echo "******************** Megaraid arrays ********************"

if $SAS; then
    MEGARAID=$(which megaraidsas-status)
else
    MEGARAID=$(which megaraid-status)
fi

if [[ `$MEGARAID | grep "RAID" | grep -o "optimal"` != "optimal" ]]; then
    echo "<font color='red'>ALERT: RAID STATUS NOT OPTIMAL!</font>"
fi
$MEGARAID
